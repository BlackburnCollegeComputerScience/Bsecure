\section{Design Implementation}
\subsection{Contacts}
We created a BSecure Contact object that wraps the functionality of the underlying Android contact database with 
our own SQLite database. This provides a simple fa√ßade for the UI code to work with.
\subsection{Keys}
Our text messages are encrypted using 256-bit keys. The keys are generated using the built-in Java crypto and security package classes configured to run in
``DH'' (Diffie-Hellman) mode. We used the AES-256 cipher in CBC mode.
\subsection{Bluetooth}
When users begin the process of creating keys to secure their communications, they must pair their android devices together with Bluetooth. The devices will use Bluetooth to
exchange keys following a server/client pattern.
We begin the process of exchanging keys by turning on the Bluetooth discovery mode using a Bluetooth adapter object. 

Once discovery mode is activated on both devices, the UI will prompt the users to find their partner's Bluetooth ID from a list of detected Bluetooth devices. 
After users have selected the correct devices, a server Bluetooth socket is opened on both devices. Then whichever device opts in to be client first will shut down
their server socket and open a client Bluetooth socket.

\subsection{Information Storage}
All persistent information generated by the application is stored in SQLite servers. Persistent information in this context refers to any keys generated, contact-specific settings, general settings, uses left per key, and sequence number information.

See Table \ref{table:contacttable} on page \pageref{table:contacttable} for the SQL row layout of our database.

\begin{table*}
\centering
\caption{Contact Table Design}
\label{table:contacttable}
\begin{tabular}{|c|c|c|c|c|c|} \hline
\texttt{Contact\_ID}&\texttt{CURRENT\_SEQUENCE\_NUM}&\texttt{MAX\_SEQUENCE\_NUM}&\texttt{TOTAL\_KEYS}&\texttt{USES\_LEFT}&\texttt{USES\_MAX}\\ \hline\end{tabular}
\end{table*}